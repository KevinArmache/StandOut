{"ast":null,"code":"/*\n * React template helpers\n * Author: Nouthemes\n * Developed: diaryforlife\n * */\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { getProductsByIds } from '~/repositories/ProductRepository';\nexport function calculateAmount(obj) {\n  return Object.values(obj).reduce((acc, {\n    quantity,\n    price\n  }) => acc + quantity * price, 0).toFixed(2);\n}\nexport function getCartItemsFromCookies() {\n  const cartItems = cookies.get('cart');\n\n  if (cartItems) {\n    return JSON.parse(cartItems);\n  } else {\n    return null;\n  }\n}\nexport function getWishListFromCookies() {\n  const items = cookies.get('wishlist');\n\n  if (items) {\n    return JSON.parse(items);\n  } else {\n    return null;\n  }\n}\nexport async function getCartItemsHelper(cart) {\n  let cartItems;\n\n  if (cart && cart.items.length > 0) {\n    let queries = '';\n    cart.items.forEach(item => {\n      if (queries === '') {\n        queries = `id_in=${item.id}`;\n      } else {\n        queries = queries + `&id_in=${item.id}`;\n      }\n    });\n    const products = await getProductsByIds(queries);\n\n    if (products && products.items.length > 0) {\n      cartItems = products.items;\n      cart.items.forEach((item, index) => {\n        if (item.id === cartItems[index].id) {\n          cartItems[index].quantity = item.quantity;\n        }\n      });\n    }\n\n    return {\n      items: cartItems\n    };\n  } else {\n    return {\n      items: []\n    };\n  }\n}\nexport async function getWishListItemsHelper(payload) {\n  let wishlistItems;\n\n  if (payload && payload.length > 0) {\n    let queries = '';\n    payload.forEach(item => {\n      if (queries === '') {\n        queries = `id_in=${item}`;\n      } else {\n        queries = queries + `&id_in=${item}`;\n      }\n    });\n    const products = await getProductsByIds(queries);\n\n    if (products && products.items.length > 0) {\n      wishlistItems = products.items;\n    }\n\n    return wishlistItems;\n  } else {\n    return null;\n  }\n}\nexport function updateCartToCookies(payload) {\n  cookies.set('cart', payload, {\n    path: '/',\n    expires: 24 * 7\n  });\n}\nexport function updateWishlistToCookies(payload) {\n  cookies.set('wishlist', payload, {\n    path: '/',\n    expires: 24 * 7\n  });\n}\nexport function addItemToCartHelper(product) {\n  let cart;\n  let cookieCart = getCartItemsFromCookies();\n\n  if (cookieCart) {\n    cart = cookieCart;\n    const existItem = cart.items.find(item => item.id === product.id);\n\n    if (existItem) {\n      existItem.quantity += product.quantity;\n    } else {\n      /* if (!product.quantity) {\n          product.quantity = 1;\n      }*/\n      cart.items.push(product);\n    }\n  } else {\n    cart = {\n      items: []\n    };\n    cart.items.push(product);\n  }\n\n  updateCartToCookies(cart);\n  return cart;\n}\nexport function addItemToWishlistHelper(payload) {\n  let wishlist = [];\n  let cookieWishlist = getWishListFromCookies();\n\n  if (cookieWishlist) {\n    wishlist = cookieWishlist;\n    const existItem = wishlist.find(item => item === payload);\n\n    if (existItem === undefined) {\n      wishlist.push(payload);\n    }\n  } else {\n    wishlist.push(payload);\n  }\n\n  updateWishlistToCookies(wishlist);\n  return wishlist;\n}\nexport function increaseQtyCartItemHelper(product) {\n  let cart;\n  let cookieCart = getCartItemsFromCookies();\n\n  if (cookieCart) {\n    cart = cookieCart;\n    const selectedItem = cart.items.find(item => item.id === product.id);\n\n    if (selectedItem) {\n      selectedItem.quantity = selectedItem.quantity + 1;\n    }\n\n    updateCartToCookies(cart);\n    return cart;\n  }\n}\nexport function decreaseQtyCartItemHelper(product) {\n  let cart;\n  let cookieCart = getCartItemsFromCookies();\n\n  if (cookieCart) {\n    cart = cookieCart;\n    const selectedItem = cart.items.find(item => item.id === product.id);\n\n    if (selectedItem) {\n      selectedItem.quantity = selectedItem.quantity - 1;\n    }\n\n    updateCartToCookies(cart);\n    return cart;\n  }\n}\nexport function removeCartItemHelper(product) {\n  let cart;\n  let cookieCart = getCartItemsFromCookies();\n\n  if (cookieCart) {\n    cart = cookieCart;\n    const index = cart.items.findIndex(item => item.id === product.id);\n    cart.items.splice(index, 1);\n    updateCartToCookies(cart);\n    return cart;\n  }\n}\nexport function removeItemFromWishlist(payload) {\n  let wishlist = [];\n  let cookieWishlist = getWishListFromCookies();\n\n  if (cookieWishlist) {\n    wishlist = cookieWishlist;\n    const index = wishlist.findIndex(item => item === payload);\n    console.log({\n      index\n    });\n    wishlist.splice(index, 1);\n    console.log({\n      wishlist\n    });\n    updateWishlistToCookies(wishlist);\n    return wishlist;\n  }\n}","map":{"version":3,"sources":["/home/onizuka/Bureau/Projects/StandOut/utilities/ecomerce-helpers.js"],"names":["React","cookies","getProductsByIds","calculateAmount","obj","Object","values","reduce","acc","quantity","price","toFixed","getCartItemsFromCookies","cartItems","get","JSON","parse","getWishListFromCookies","items","getCartItemsHelper","cart","length","queries","forEach","item","id","products","index","getWishListItemsHelper","payload","wishlistItems","updateCartToCookies","set","path","expires","updateWishlistToCookies","addItemToCartHelper","product","cookieCart","existItem","find","push","addItemToWishlistHelper","wishlist","cookieWishlist","undefined","increaseQtyCartItemHelper","selectedItem","decreaseQtyCartItemHelper","removeCartItemHelper","findIndex","splice","removeItemFromWishlist","console","log"],"mappings":"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","sourcesContent":["/*\n * React template helpers\n * Author: Nouthemes\n * Developed: diaryforlife\n * */\n\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { getProductsByIds } from '~/repositories/ProductRepository';\n\nexport function calculateAmount(obj) {\n    return Object.values(obj)\n        .reduce((acc, { quantity, price }) => acc + quantity * price, 0)\n        .toFixed(2);\n}\n\nexport function getCartItemsFromCookies() {\n    const cartItems = cookies.get('cart');\n    if (cartItems) {\n        return JSON.parse(cartItems);\n    } else {\n        return null;\n    }\n}\n\nexport function getWishListFromCookies() {\n    const items = cookies.get('wishlist');\n    if (items) {\n        return JSON.parse(items);\n    } else {\n        return null;\n    }\n}\n\nexport async function getCartItemsHelper(cart) {\n    let cartItems;\n    if (cart && cart.items.length > 0) {\n        let queries = '';\n        cart.items.forEach((item) => {\n            if (queries === '') {\n                queries = `id_in=${item.id}`;\n            } else {\n                queries = queries + `&id_in=${item.id}`;\n            }\n        });\n        const products = await getProductsByIds(queries);\n        if (products && products.items.length > 0) {\n            cartItems = products.items;\n            cart.items.forEach((item, index) => {\n                if (item.id === cartItems[index].id) {\n                    cartItems[index].quantity = item.quantity;\n                }\n            });\n        }\n        return {\n            items: cartItems,\n        };\n    } else {\n        return {\n            items: [],\n        };\n    }\n}\n\nexport async function getWishListItemsHelper(payload) {\n    let wishlistItems;\n    if (payload && payload.length > 0) {\n        let queries = '';\n        payload.forEach((item) => {\n            if (queries === '') {\n                queries = `id_in=${item}`;\n            } else {\n                queries = queries + `&id_in=${item}`;\n            }\n        });\n        const products = await getProductsByIds(queries);\n        if (products && products.items.length > 0) {\n            wishlistItems = products.items;\n        }\n        return wishlistItems;\n    } else {\n        return null;\n    }\n}\n\nexport function updateCartToCookies(payload) {\n    cookies.set('cart', payload, { path: '/', expires: 24 * 7 });\n}\n\nexport function updateWishlistToCookies(payload) {\n    cookies.set('wishlist', payload, { path: '/', expires: 24 * 7 });\n}\n\nexport function addItemToCartHelper(product) {\n    let cart;\n    let cookieCart = getCartItemsFromCookies();\n    if (cookieCart) {\n        cart = cookieCart;\n        const existItem = cart.items.find((item) => item.id === product.id);\n        if (existItem) {\n            existItem.quantity += product.quantity;\n        } else {\n            /* if (!product.quantity) {\n                product.quantity = 1;\n            }*/\n            cart.items.push(product);\n        }\n    } else {\n        cart = {\n            items: [],\n        };\n        cart.items.push(product);\n    }\n    updateCartToCookies(cart);\n    return cart;\n}\n\nexport function addItemToWishlistHelper(payload) {\n    let wishlist = [];\n    let cookieWishlist = getWishListFromCookies();\n    if (cookieWishlist) {\n        wishlist = cookieWishlist;\n        const existItem = wishlist.find((item) => item === payload);\n        if (existItem === undefined) {\n            wishlist.push(payload);\n        }\n    } else {\n        wishlist.push(payload);\n    }\n    updateWishlistToCookies(wishlist);\n    return wishlist;\n}\n\nexport function increaseQtyCartItemHelper(product) {\n    let cart;\n    let cookieCart = getCartItemsFromCookies();\n    if (cookieCart) {\n        cart = cookieCart;\n        const selectedItem = cart.items.find((item) => item.id === product.id);\n\n        if (selectedItem) {\n            selectedItem.quantity = selectedItem.quantity + 1;\n        }\n        updateCartToCookies(cart);\n        return cart;\n    }\n}\n\nexport function decreaseQtyCartItemHelper(product) {\n    let cart;\n    let cookieCart = getCartItemsFromCookies();\n    if (cookieCart) {\n        cart = cookieCart;\n        const selectedItem = cart.items.find((item) => item.id === product.id);\n\n        if (selectedItem) {\n            selectedItem.quantity = selectedItem.quantity - 1;\n        }\n        updateCartToCookies(cart);\n        return cart;\n    }\n}\n\nexport function removeCartItemHelper(product) {\n    let cart;\n    let cookieCart = getCartItemsFromCookies();\n    if (cookieCart) {\n        cart = cookieCart;\n        const index = cart.items.findIndex((item) => item.id === product.id);\n        cart.items.splice(index, 1);\n        updateCartToCookies(cart);\n        return cart;\n    }\n}\n\nexport function removeItemFromWishlist(payload) {\n    let wishlist = [];\n    let cookieWishlist = getWishListFromCookies();\n    if (cookieWishlist) {\n        wishlist = cookieWishlist;\n        const index = wishlist.findIndex((item) => item === payload);\n        console.log({ index });\n        wishlist.splice(index, 1);\n        console.log({ wishlist });\n        updateWishlistToCookies(wishlist);\n        return wishlist;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}